<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="users">

	<!-- 관리자 추가 -->
	<insert id="addAdmin">
		INSERT INTO recipeuser
		(userid, userpw, nickname, username, useremail, usertel, userbirth, signupdate, accesslevel, userdeactivate)
		VALUES (#{userid}, #{userpw}, #{nickname}, #{username}, #{useremail}, #{usertel}, #{userbirth}, NOW(), 'manager', 0)
	</insert>
	
	<insert id="addUserLoginState">
		INSERT INTO userloginstate
		(userid, wrongnum, blocklogin)
		VALUES (#{userid}, 0, 0)
	</insert>
	
    <!-- 회원가입 -->
    <insert id="addUser">
        INSERT INTO recipeuser
        (userid, userpw, nickname, username, useremail, usertel, userbirth, signupdate, accesslevel, userdeactivate)
        VALUES (#{userid}, #{userpw}, #{nickname}, #{username}, #{useremail}, #{usertel}, #{userbirth}, NOW(), 'normal', 0)
    </insert>
    <insert id="initLoginState">
    	INSERT INTO userloginstate
    	(userid, islogin, wrongnum, blocklogin, blockdate)
    	VALUES (#{userid}, 0, 0, 0, NULL)
    </insert>
    
    <select id="duplicateIDCheck" resultType="int">
    SELECT COUNT(*) FROM recipeuser WHERE userid = #{userid}
	</select>
	
	<select id="duplicateNickname" parameterType="String" resultType="int">
	    SELECT COUNT(*) FROM recipeuser WHERE nickname = #{nickname}
	</select>
	
	<select id="duplicateEmail" parameterType="String" resultType="int">
	    SELECT COUNT(*) FROM recipeuser WHERE useremail = #{useremail}
	</select>
    
</mapper>